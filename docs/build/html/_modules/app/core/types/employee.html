<!DOCTYPE html>

<html lang="ru" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>app.core.types.employee &#8212; документация CL Bot 2.0</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css?v=27fed22d" />
    <script src="../../../../_static/documentation_options.js?v=0eddcf85"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/translations.js?v=cd1d70c9"></script>
    <link rel="index" title="Алфавитный указатель" href="../../../../genindex.html" />
    <link rel="search" title="Поиск" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Исходный код app.core.types.employee</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Модуль определения класса сотрудника и связанных с ним типов данных.</span>

<span class="sd">Этот модуль предоставляет основную структуру данных для работы с информацией о сотрудниках</span>
<span class="sd">кофеен, включая персональные данные, даты медицинских книжек и сертификатов, а также</span>
<span class="sd">результаты тестирований. Модуль содержит классы для создания, хранения и обработки</span>
<span class="sd">всех данных, связанных с сотрудниками.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bson</span><span class="w"> </span><span class="kn">import</span> <span class="n">ObjectId</span>


<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">_TimeConst</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Класс констант для работы с временем.</span>
<span class="sd">    </span>
<span class="sd">    Содержит константы для перевода минут, часов и суток в секунды.</span>
<span class="sd">    Используется для внутренних расчётов временных интервалов.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">minute</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="n">hour</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="n">minute</span>
    <span class="n">hours_24</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="n">hour</span>


<div class="viewcode-block" id="TestType">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.TestType">[документация]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TestType</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Класс для определения типов тестирования сотрудников.</span>
<span class="sd">    </span>
<span class="sd">    Содержит константы для обозначения различных типов тестов,</span>
<span class="sd">    которые могут проходить сотрудники компании.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">BASE</span> <span class="o">=</span> <span class="s2">&quot;База&quot;</span>
    <span class="n">PROFI</span> <span class="o">=</span> <span class="s2">&quot;Профи&quot;</span></div>



<div class="viewcode-block" id="TestResult">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.TestResult">[документация]</a>
<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TestResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Класс для хранения результатов одного тестирования.</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">        completion_time (str): Время прохождения в формате &quot;MM:SS&quot;</span>
<span class="sd">        score (int): Количество баллов</span>
<span class="sd">        rank (int): Место в списке</span>
<span class="sd">        date (str): Дата прохождения теста в формате DD.MM.YYYY</span>
<span class="sd">        type (TestType): Тип теста</span>
<span class="sd">        _id (str): Уникальный идентификатор результата тестирования</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">completion_time</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">score</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">rank</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">date</span><span class="p">:</span> <span class="nb">str</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">TestType</span>
    <span class="n">_id</span><span class="p">:</span> <span class="nb">str</span>

<div class="viewcode-block" id="TestResult.__init__">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.TestResult.__init__">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">completion_time</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">score</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="n">TestType</span><span class="p">,</span> <span class="n">_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Инициализирует новый объект результата тестирования.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            completion_time (str): Время прохождения теста</span>
<span class="sd">            score (int): Набранные баллы</span>
<span class="sd">            rank (int): Ранг/место в списке результатов</span>
<span class="sd">            date (str): Дата прохождения теста</span>
<span class="sd">            type (TestType): Тип пройденного теста</span>
<span class="sd">            _id (str, optional): Уникальный идентификатор. Если не указан, генерируется автоматически.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">completion_time</span> <span class="o">=</span> <span class="n">completion_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">score</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rank</span> <span class="o">=</span> <span class="n">rank</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="n">_id</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">__dict__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Преобразует объект в словарь для сериализации.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            dict: Словарь с атрибутами объекта</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;completion_time&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">completion_time</span><span class="p">,</span>
                <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">,</span>
                <span class="s2">&quot;rank&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank</span><span class="p">,</span>
                <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span>
            <span class="n">x</span><span class="p">[</span><span class="s2">&quot;_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
        <span class="k">return</span> <span class="n">x</span></div>


<div class="viewcode-block" id="Employee">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee">[документация]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Employee</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Класс для представления сотрудника компании.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): ФИО сотрудника</span>
<span class="sd">        birthday (str): Дата рождения в формате DD.MM.YYYY</span>
<span class="sd">        registration (str): Адрес регистрации</span>
<span class="sd">        workstarted (str): Дата начала работы в формате DD.MM.YYYY  </span>
<span class="sd">        lmk (str): Дата начала действия медицинской книжки в формате DD.MM.YYYY</span>
<span class="sd">        id (str): Уникальный идентификатор сотрудника</span>
<span class="sd">        cert_base (str): Дата начала действия базового сертификата в формате DD.MM.YYYY</span>
<span class="sd">        cert_base_path (list[str]): Список путей к файлам базовых сертификатов</span>
<span class="sd">        cert_profi (str): Дата начала действия профессионального сертификата в формате DD.MM.YYYY</span>
<span class="sd">        cert_profi_path (list[str]): Список путей к файлам профессиональных сертификатов</span>
<span class="sd">        test_results (list[TestResult]): Список результатов тестирований</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">birthday</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">registration</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">experience</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">workstarted</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">lmk</span><span class="p">:</span> <span class="nb">str</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">cert_base</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">cert_base_path</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">cert_profi</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">cert_profi_path</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">test_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]</span>
    

<div class="viewcode-block" id="Employee.__init__">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.__init__">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">birthday</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">registration</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">workstarted</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">lmk</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">cert_base</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">cert_base_path</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
                <span class="n">cert_profi</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">cert_profi_path</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
                <span class="n">test_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Инициализирует новый объект сотрудника.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            name (str): ФИО сотрудника</span>
<span class="sd">            birthday (str): Дата рождения в формате DD.MM.YYYY</span>
<span class="sd">            registration (str): Адрес регистрации</span>
<span class="sd">            workstarted (str): Дата начала работы в формате DD.MM.YYYY</span>
<span class="sd">            lmk (str): Дата начала действия медицинской книжки в формате DD.MM.YYYY</span>
<span class="sd">            id (str): Уникальный идентификатор сотрудника</span>
<span class="sd">            cert_base (str, optional): Дата начала действия базового сертификата</span>
<span class="sd">            cert_base_path (list[str], optional): Список путей к файлам базовых сертификатов</span>
<span class="sd">            cert_profi (str, optional): Дата начала действия профессионального сертификата</span>
<span class="sd">            cert_profi_path (list[str], optional): Список путей к файлам профессиональных сертификатов</span>
<span class="sd">            test_results (List[TestResult], optional): Список результатов тестирований</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">birthday</span> <span class="o">=</span> <span class="n">birthday</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registration</span> <span class="o">=</span> <span class="n">registration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workstarted</span> <span class="o">=</span> <span class="n">workstarted</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lmk</span> <span class="o">=</span> <span class="n">lmk</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cert_base</span> <span class="o">=</span> <span class="n">cert_base</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cert_base_path</span> <span class="o">=</span> <span class="n">cert_base_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cert_profi</span> <span class="o">=</span> <span class="n">cert_profi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cert_profi_path</span> <span class="o">=</span> <span class="n">cert_profi_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_results</span> <span class="o">=</span> <span class="n">test_results</span> <span class="ow">or</span> <span class="p">[]</span></div>



    <span class="k">def</span><span class="w"> </span><span class="nf">__dict__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Преобразует объект в словарь для сериализации.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            dict: Словарь с атрибутами объекта</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;birthday&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">birthday</span><span class="p">,</span>
            <span class="s2">&quot;registration&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">registration</span><span class="p">,</span>
            <span class="s2">&quot;workstarted&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">workstarted</span><span class="p">,</span>
            <span class="s2">&quot;lmk&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lmk</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">&quot;cert_base&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_base</span><span class="p">,</span>
            <span class="s2">&quot;cert_base_path&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_base_path</span><span class="p">,</span>
            <span class="s2">&quot;cert_profi&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_profi</span><span class="p">,</span>
            <span class="s2">&quot;cert_profi_path&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_profi_path</span><span class="p">,</span>
            <span class="s2">&quot;test_results&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">result</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_results</span>
            <span class="p">]</span>
        <span class="p">}</span>

<div class="viewcode-block" id="Employee.get_experience">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_experience">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_experience</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет стаж работы сотрудника.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: Стаж работы в формате &quot;X лет Y месяцев Z дней&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">workstarted_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workstarted</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Неизвестно&quot;</span>
        
        <span class="n">experience_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">workstarted_date</span>

        <span class="n">years</span> <span class="o">=</span> <span class="n">experience_date</span><span class="o">.</span><span class="n">days</span> <span class="o">//</span> <span class="mi">365</span>
        <span class="n">days</span> <span class="o">=</span> <span class="n">experience_date</span><span class="o">.</span><span class="n">days</span> <span class="o">-</span> <span class="p">(</span><span class="n">years</span><span class="o">*</span><span class="mi">365</span><span class="p">)</span>

        <span class="n">month</span> <span class="o">=</span> <span class="n">days</span> <span class="o">//</span> <span class="mi">30</span>
        <span class="n">days</span> <span class="o">=</span> <span class="n">days</span> <span class="o">-</span> <span class="p">(</span><span class="n">month</span><span class="o">*</span><span class="mi">30</span><span class="p">)</span>

        <span class="n">years_postfix</span> <span class="o">=</span> <span class="s2">&quot;лет&quot;</span>
        <span class="n">month_postfix</span> <span class="o">=</span> <span class="s2">&quot;месяцев&quot;</span>
        <span class="n">days_postfix</span> <span class="o">=</span> <span class="s2">&quot;дней&quot;</span>
        <span class="k">if</span> <span class="n">years</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">years</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">years_postfix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="n">years</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">years_postfix</span> <span class="o">=</span> <span class="s2">&quot;год&quot;</span>
        <span class="k">elif</span> <span class="n">years</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">years</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">years</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">years_postfix</span> <span class="o">=</span> <span class="s2">&quot;года&quot;</span>

        <span class="k">if</span> <span class="n">month</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">month</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">month_postfix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="n">month</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">month_postfix</span> <span class="o">=</span> <span class="s2">&quot;месяц&quot;</span>
        <span class="k">elif</span> <span class="n">month</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">month</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">month</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">month_postfix</span> <span class="o">=</span> <span class="s2">&quot;месяца&quot;</span>

        <span class="k">if</span> <span class="n">days</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">days</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">days_postfix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">elif</span> <span class="n">days</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">days</span><span class="p">))[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
            <span class="n">days_postfix</span> <span class="o">=</span> <span class="s2">&quot;день&quot;</span>
        <span class="k">elif</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">days</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">days</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">days</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">days</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">or</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">days</span><span class="p">))[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span> <span class="ow">or</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">days</span><span class="p">))[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;3&#39;</span> <span class="ow">or</span> <span class="nb">list</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">days</span><span class="p">))[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;4&#39;</span><span class="p">:</span>
                <span class="n">days_postfix</span> <span class="o">=</span> <span class="s2">&quot;дня&quot;</span>

        <span class="c1"># Собираем только непустые значения</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">years</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">years</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">years_postfix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">month</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">month</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">month_postfix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">days</span><span class="p">:</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">days_postfix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span></div>


<div class="viewcode-block" id="Employee.get_lmk_expire_date">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_lmk_expire_date">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_lmk_expire_date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет дату окончания действия медицинской книжки.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: Дата окончания действия медицинской книжки в формате DD.MM.YYYY</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lmk_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lmk</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
        <span class="n">lmk_expiry</span> <span class="o">=</span> <span class="n">lmk_date</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">lmk_date</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lmk_expiry</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Employee.get_days_to_birth">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_days_to_birth">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_days_to_birth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет количество дней до дня рождения сотрудника.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: Количество дней до дня рождения сотрудника</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">birthday</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">birthday</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Неизвестно&quot;</span>
        
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_dates</span><span class="p">(</span><span class="n">birthday</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Employee.get_days_to_anniversary">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_days_to_anniversary">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_days_to_anniversary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет количество дней до годовщины начала работы сотрудника.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: Количество дней до годовщины начала работы сотрудника</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">anniversary</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workstarted</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Неизвестно&quot;</span>
        
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_dates</span><span class="p">(</span><span class="n">anniversary</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span></div>


<div class="viewcode-block" id="Employee.get_days_to_cert">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_days_to_cert">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_days_to_cert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cert_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет количество дней до окончания действия сертификата.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            cert_type (str): Тип сертификата (&#39;base&#39; или &#39;profi&#39;)</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: Количество дней до окончания действия сертификата</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cert_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;base&#39;</span> <span class="ow">or</span> <span class="n">cert_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;база&#39;</span><span class="p">:</span>
            <span class="n">cert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_base</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_profi</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">replacement_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">cert</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">)</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">replacement_date</span> <span class="o">-</span> <span class="n">now</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Отсутствует&quot;</span></div>


<div class="viewcode-block" id="Employee.get_cert_expire_date">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_cert_expire_date">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_cert_expire_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cert_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет дату окончания действия сертификата.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            cert_type (str): Тип сертификата (&#39;base&#39; или &#39;profi&#39;)</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: Дата окончания действия сертификата в формате DD.MM.YYYY</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cert_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;base&#39;</span> <span class="ow">or</span> <span class="n">cert_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;база&#39;</span><span class="p">:</span>
            <span class="n">cert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_base</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cert</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_profi</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">replacement_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">cert</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">replacement_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Отсутствует&quot;</span></div>


<div class="viewcode-block" id="Employee.get_cert_by_type">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_cert_by_type">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_cert_by_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cert_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Возвращает список путей к файлам сертификата.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            cert_type (str): Тип сертификата (&#39;base&#39; или &#39;profi&#39;)</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            list[str]: Список путей к файлам сертификата</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cert_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;base&#39;</span> <span class="ow">or</span> <span class="n">cert_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;база&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_base_path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cert_profi_path</span></div>


<div class="viewcode-block" id="Employee.needing_cert_replacement">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.needing_cert_replacement">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">needing_cert_replacement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cert_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Проверяет, требуется ли замена сертификата.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            cert_type (str): Тип сертификата (&#39;base&#39; или &#39;profi&#39;)</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            bool: True если сертификат просрочен, False в противном случае</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cert_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_cert_by_type</span><span class="p">(</span><span class="n">cert_type</span><span class="p">),</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
            <span class="n">expiration_date</span> <span class="o">=</span> <span class="n">cert_date</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">expiration_date</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Employee.get_days_lmk">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_days_lmk">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_days_lmk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет количество дней до окончания действия медицинской книжки.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: Количество дней до окончания действия медицинской книжки</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lmk</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lmk</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Неизвестно&quot;</span>
        
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_dates</span><span class="p">(</span><span class="n">lmk</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Employee.needing_lmk_replacement">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.needing_lmk_replacement">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">needing_lmk_replacement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Проверяет, требуется ли замена медицинской книжки.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            bool: True если медицинская книжка просрочена, False в противном случае</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lmk_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lmk</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
            <span class="n">expiration_date</span> <span class="o">=</span> <span class="n">lmk_date</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">expiration_date</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Employee.time_to_lmk_replacement">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.time_to_lmk_replacement">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">time_to_lmk_replacement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет количество дней до замены медицинской книжки.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Union[int, str]: Количество дней до замены медицинской книжки</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lmk_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lmk</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
            <span class="n">replacement_date</span> <span class="o">=</span> <span class="n">lmk_date</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">365</span><span class="p">)</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">replacement_date</span> <span class="o">-</span> <span class="n">now</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Неизвестно&quot;</span></div>

        
    <span class="k">def</span><span class="w"> </span><span class="nf">_calculate_dates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">original_date</span><span class="p">,</span> <span class="n">now</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет количество дней до определенной даты.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            original_date (datetime): Дата, до которой необходимо вычислить количество дней</span>
<span class="sd">            now (datetime): Текущая дата</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            int: Количество дней до определенной даты</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">delta1</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">original_date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">original_date</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
        <span class="n">delta2</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">year</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">original_date</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">original_date</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="p">((</span><span class="n">delta1</span> <span class="k">if</span> <span class="n">delta1</span> <span class="o">&gt;</span> <span class="n">now</span> <span class="k">else</span> <span class="n">delta2</span><span class="p">)</span> <span class="o">-</span> <span class="n">now</span><span class="p">)</span><span class="o">.</span><span class="n">days</span>
    
<div class="viewcode-block" id="Employee.get_years_old">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.get_years_old">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_years_old</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Вычисляет возраст сотрудника.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            str: Возраст сотрудника</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">birthday</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">birthday</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.%Y&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Неизвестно&quot;</span>
        
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">years</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="n">birthday</span><span class="o">.</span><span class="n">year</span>
        
        <span class="c1"># Корректировка возраста если день рождения в этом году еще не наступил</span>
        <span class="k">if</span> <span class="n">now</span><span class="o">.</span><span class="n">month</span> <span class="o">&lt;</span> <span class="n">birthday</span><span class="o">.</span><span class="n">month</span> <span class="ow">or</span> <span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">month</span> <span class="o">==</span> <span class="n">birthday</span><span class="o">.</span><span class="n">month</span> <span class="ow">and</span> <span class="n">now</span><span class="o">.</span><span class="n">day</span> <span class="o">&lt;</span> <span class="n">birthday</span><span class="o">.</span><span class="n">day</span><span class="p">):</span>
            <span class="n">years</span> <span class="o">-=</span> <span class="mi">1</span>
            
        <span class="k">return</span> <span class="n">years</span></div>


<div class="viewcode-block" id="Employee.add_test_result">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.add_test_result">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_test_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_result</span><span class="p">:</span> <span class="n">TestResult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Добавляет результат тестирования.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            test_result (TestResult): Результат тестирования</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">test_result</span><span class="p">)</span></div>


<div class="viewcode-block" id="Employee.find_test_result">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.Employee.find_test_result">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">find_test_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TestResult</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Находит результат тестирования по идентификатору.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            _id (str): Идентификатор результата тестирования</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            TestResult: Результат тестирования или None если не найден</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_results</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">_id</span> <span class="o">==</span> <span class="n">_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="kc">None</span></div>
</div>



<div class="viewcode-block" id="EmployeeBuilder">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.EmployeeBuilder">[документация]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EmployeeBuilder</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Класс для построения объекта сотрудника.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="EmployeeBuilder.__init__">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.EmployeeBuilder.__init__">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">birthday</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">registration</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">workstarted</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">lmk</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">cert_base</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">cert_base_path</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
                <span class="n">cert_profi</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="n">cert_profi_path</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
                <span class="n">test_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Инициализирует новый объект построителя сотрудника.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            name (str): ФИО сотрудника</span>
<span class="sd">            birthday (str): Дата рождения в формате DD.MM.YYYY</span>
<span class="sd">            registration (str): Адрес регистрации</span>
<span class="sd">            workstarted (str): Дата начала работы в формате DD.MM.YYYY</span>
<span class="sd">            lmk (str): Дата начала действия медицинской книжки в формате DD.MM.YYYY</span>
<span class="sd">            id (str): Уникальный идентификатор сотрудника</span>
<span class="sd">            cert_base (str, optional): Дата начала действия базового сертификата</span>
<span class="sd">            cert_base_path (list[str], optional): Список путей к файлам базовых сертификатов</span>
<span class="sd">            cert_profi (str, optional): Дата начала действия профессионального сертификата</span>
<span class="sd">            cert_profi_path (list[str], optional): Список путей к файлам профессиональных сертификатов</span>
<span class="sd">            test_results (List[TestResult], optional): Список результатов тестирований</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">test_results</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">test_results</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">test_results</span><span class="p">:</span>
                        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TestResult</span><span class="p">(</span>
                            <span class="n">completion_time</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;completion_time&#39;</span><span class="p">],</span>
                            <span class="n">score</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">],</span>
                            <span class="n">rank</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">],</span>
                            <span class="n">date</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">],</span>
                            <span class="nb">type</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">],</span>
                            <span class="n">_id</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;_id&#39;</span><span class="p">]</span>
                        <span class="p">))</span>
                    <span class="n">test_results</span> <span class="o">=</span> <span class="n">x</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">employee</span> <span class="o">=</span> <span class="n">Employee</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">birthday</span><span class="p">,</span>
            <span class="n">registration</span><span class="p">,</span>
            <span class="n">workstarted</span><span class="p">,</span>
            <span class="n">lmk</span><span class="p">,</span>
            <span class="nb">id</span><span class="p">,</span>
            <span class="n">cert_base</span><span class="p">,</span>
            <span class="n">cert_base_path</span><span class="p">,</span>
            <span class="n">cert_profi</span><span class="p">,</span>
            <span class="n">cert_profi_path</span><span class="p">,</span>
            <span class="n">test_results</span>
        <span class="p">)</span></div>

    
<div class="viewcode-block" id="EmployeeBuilder.get_employee">
<a class="viewcode-back" href="../../../../modules/core/types.html#app.core.types.employee.EmployeeBuilder.get_employee">[документация]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_employee</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Возвращает построенный объект сотрудника.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            Employee: Построенный объект сотрудника</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">employee</span></div>

    
    <span class="k">def</span><span class="w"> </span><span class="nf">__dict__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Преобразует объект в словарь для сериализации.</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">            dict: Словарь с атрибутами объекта</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">employee</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">()</span></div>

</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">CL Bot</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Искать" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Навигация</h3>
<p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/main.html">Главный модуль</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/core/index.html">Модуль Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/telegram/index.html">Модуль Telegram</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/notifier/index.html">Модуль Notifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/backup/index.html">Модуль Backup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules/settings.html">Настройки</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Код модуля</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Mark Davian.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>